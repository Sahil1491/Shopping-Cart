"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[39419],{43367:function(n,t,e){e.d(t,{xo:function(){return P},Wo:function(){return S},zK:function(){return D},Sj:function(){return N},sh:function(){return E},BL:function(){return x},P4:function(){return k},Gz:function(){return j},uQ:function(){return Z},Rm:function(){return w}});var r,i=e(94713),o=e(5338),a=e(6939),c=e(30073),u=e.n(c),l=e(91341),s=e(10086),f=e(23810),p=e(75893),v=e(75976);function d(n,t,e){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{revalidate:!1};if(t){if("function"==typeof t)r=function(e){var r=Array.isArray(e)?e:[null];return(0,f.Z)(r,1)[0]===n.tag&&t(e)};else{var o=Array.isArray(t)?t:[t,void 0],a=(0,f.Z)(o,2),c=a[0],u=a[1];r=(0,v.Qd)(n,c,u)}}else r=function(t){var e=Array.isArray(t)?t:[null];return(0,f.Z)(e,1)[0]===n.tag};(0,p.JG)(r,"function"==typeof e?function(n){return n&&e(n)}:e,i).catch(Sentry.captureException)}function g(n,t){d(n,void 0,void 0,t)}var b=e(54184),O=e(69566),y=e(23194);function m(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,r)}return e}function h(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?m(Object(e),!0).forEach(function(t){(0,i.Z)(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):m(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var j=(0,s.xk)(function(n){return"/api/v2/me/collections/medium/".concat(n.id)},(0,s.Nv)()),P=(0,s.H$)(function(n){var t=n.collection,e=n.medium;return["POST","/api/v2/collections/".concat((0,b.j)(t),"/photos").concat(e&&"?photo_id=".concat((0,b.j)(e))),null]},(0,s.Nv)(),{onSuccess:function(n){var t=n.collection,e=n.medium;(0,l.Z)({name:"collection",action:"add",id:(0,b.j)(t)}),g(y.Mk),d(j,e,function(n){return{data:[].concat((0,a.Z)(n.data),[(0,b.j)(t)])}},void 0)}}),w=(0,s.H$)(function(n){return["PATCH","/api/v2/collections/".concat((0,b.j)(n)),n.attributes]},(0,s.Nv)(),{onSuccess:function(n){(0,l.Z)({name:"collection",action:"update",id:(0,b.j)(n)}),g(y.Mk)}}),k=(0,s.H$)(function(n){return["DELETE","/api/v2/collections/".concat(n),null]},(0,s.Nv)(),{onSuccess:function(n){(0,l.Z)({name:"collection",action:"delete",id:n}),g(y.Mk),d(j,void 0,function(t){return{data:t.data.filter(function(t){return t!==n})}},void 0)}}),Z=(0,s.H$)(function(n){var t=n.collection,e=n.medium;return["DELETE","/api/v2/collections/".concat((0,b.j)(t),"/photos").concat(e?"?photo_id=".concat((0,b.j)(e)):"/"),null]},(0,s.Nv)(),{onSuccess:function(n){var t=n.collection,e=n.medium;(0,l.Z)({name:"collection",action:"remove",id:(0,b.j)(t)}),g(y.Mk),d(j,e,function(n){return{data:n.data.filter(function(n){return n!==(0,b.j)(t)})}},void 0)}}),x=(0,s.H$)(function(n){return["POST","/api/v2/collections?title=".concat(n),null]},(0,s.Nv)(),{onSuccess:(r=(0,o.Z)(u().mark(function n(t,e){var r;return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=e.data,(0,l.Z)({name:"collection",action:"create",id:r.id});case 2:case"end":return n.stop()}},n)})),function(n,t){return r.apply(this,arguments)})}),S=(0,s.xk)(function(n){return"/api/v2/collections/".concat(n)},(0,s.Nv)()),E=(0,s.EP)()(function(n,t){var e=t.page;return"/api/v2/collections?".concat((0,O.Pz)({per_page:12,page:e}))}),N=(0,s.xk)(function(n){return"/api/v3/collections/".concat(n,"/tags")},(0,s.Nv)());(0,s.xk)(function(){return"/api/v3/collections/popular"},(0,s.Nv)()),(0,s.xk)(function(n){return"/api/v3/search/collection?".concat((0,O.Pz)(n))},(0,s.Nv)()),(0,s.EP)()(function(n,t){var e=t.page;return"/api/v3/collections/suggestions?".concat((0,O.Pz)(h(h({},n),{},{page:e})))});var D=(0,s.EP)()(function(n,t){var e=t.page;return"/api/v3/collections/".concat(n,"/media?page=").concat(e,"&per_page=12")})},41030:function(n,t,e){e.d(t,{h:function(){return v}});var r=e(23810),i=e(5338),o=e(94713),a=e(30073),c=e.n(a),u=e(18529),l=e(75893),s=e(74162),f=e(75976);function p(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,r)}return e}function v(n,t,e,a){var v,d=(0,u.useMemo)(function(){var r,i,c=(0,f.Qd)(n,e,null!==(r=null===(i=n.pagination)||void 0===i?void 0:i.initial)&&void 0!==r?r:void 0),u=t?(0,o.Z)({},(0,s.qC)(c)[0],t):{},l=!t;return{initialUrl:c,initialValue:t,swrOpts:function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?p(Object(e),!0).forEach(function(t){(0,o.Z)(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):p(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}({fallback:u,revalidateOnMount:l},null==a?void 0:a.swr)}},[]),g=(0,u.useState)(function(){var e;return t?null===(e=n.meta)||void 0===e?void 0:e.call(n,t):void 0}),b=g[0],O=g[1],y=(0,u.useMemo)(function(){var t,r=null===(t=n.pagination)||void 0===t?void 0:t.initial;return(null==a?void 0:a.enabled)===!1?null:(0,f.Qd)(n,e,r)},[n,e,null==a?void 0:a.enabled]),m=(0,u.useCallback)((v=(0,i.Z)(c().mark(function t(e){var i,o,a,u;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=d.initialUrl,o=d.initialValue,a=(0,r.Z)(e,3)[2],!(o&&a===i[1])){t.next=6;break}return t.abrupt("return",o);case 6:return t.next=8,n.queryFn(e,"response");case 8:return u=t.sent,n.meta&&u&&O(function(t){var e,r;return null!==(e=null===(r=n.meta)||void 0===r?void 0:r.call(n,u))&&void 0!==e?e:t}),t.abrupt("return",u);case 11:case"end":return t.stop()}},t)})),function(n){return v.apply(this,arguments)}),[n,d]),h=(0,l.ZP)(y,m,d.swrOpts),j=h.data,P=h.isLoading,w=h.isValidating,k=h.mutate;return(0,u.useMemo)(function(){var n;return{data:j,meta:b,isLoading:P,isFetching:P||w,mutate:k,refetch:(n=(0,i.Z)(c().mark(function n(){return c().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,k();case 2:case"end":return n.stop()}},n)})),function(){return n.apply(this,arguments)})}},[j,b,P,w,k])}},58766:function(n,t,e){e.d(t,{Y:function(){return y}});var r=e(5338),i=e(94713),o=e(23810),a=e(6939),c=e(30073),u=e.n(c),l=e(69849),s=e.n(l),f=e(18529),p=e(74162),v=e(39010),d=e(75976);function g(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,r)}return e}function b(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?g(Object(e),!0).forEach(function(t){(0,i.Z)(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):g(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var O={parallel:!0,revalidateFirstPage:!1,revalidateAll:!1};function y(n,t,e,c){var l,g=(0,f.useRef)(void 0),y=(0,f.useMemo)(function(){var r,a=null!==(s=n.pagination)&&void 0!==s?s:{},u=a.initial,l=a.initPageState;if(l){var s,f,y,m,h=null!==(m=null==t?void 0:t.pagination)&&void 0!==m?m:null;g.current=l(h)}var j=(0,d.Qd)(n,e,u,0),P=(0,o.Z)(j,3)[2],w=null!==(f=(r=n.select)&&t?r(t):t)&&void 0!==f?f:null,k=w?(y={},(0,i.Z)(y,(0,p.qC)(j)[0],[w]),(0,i.Z)(y,(0,v.wE)(function(){return j}),[w]),y):{},Z=!w;return{initialKey:j,initialUrl:P,initialPage:w,swrOpts:b(b({},O),{},{revalidateOnMount:Z,fallback:k},null==c?void 0:c.swr)}},[]),m=(0,f.useState)(function(){var e;return t?null===(e=n.meta)||void 0===e?void 0:e.call(n,t):void 0}),h=m[0],j=m[1],P=(0,f.useCallback)(function(t){var r,i,o,a=null!==(r=null===(i=n.pagination)||void 0===i?void 0:i.getPageState(g.current,t))&&void 0!==r?r:null===(o=n.pagination)||void 0===o?void 0:o.initial;return[n.tag,"GET",n.keyFn(e,a),null,t]},[n,e]),w=(0,f.useCallback)((l=(0,r.Z)(u().mark(function t(e){var r,i,a,c,l,f,p;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=y.initialKey,i=y.initialPage,a=(0,o.Z)(e,5)[4],!(i&&s()(r,e))){t.next=6;break}return t.abrupt("return",i);case 6:return t.next=8,n.queryFn(e,"response");case 8:var u;return l=t.sent,f=(u=n.select)&&l?u(l):l,l&&null!==(c=n.pagination)&&void 0!==c&&c.updateState&&void 0!==(p=n.pagination.updateState(l.pagination,g.current,a))&&(g.current=p),n.meta&&l&&j(function(t){var e,r;return null!==(e=null===(r=n.meta)||void 0===r?void 0:r.call(n,l))&&void 0!==e?e:t}),t.abrupt("return",f);case 13:case"end":return t.stop()}},t)})),function(n){return l.apply(this,arguments)}),[n,y]),k=(0,v.ZP)(P,w,y.swrOpts),Z=k.data,x=k.isLoading,S=k.isValidating,E=k.size,N=k.mutate,D=k.setSize,M=(0,f.useMemo)(function(){var n;return null!==(n=null==Z?void 0:Z.reduce(function(n,t){return n.push.apply(n,(0,a.Z)(t)),n},[]))&&void 0!==n?n:[]},[Z]);return(0,f.useMemo)(function(){var t,e,i,o;return{data:M,meta:h,isLoading:x,isFetching:x||S,queryKey:y.initialUrl,hasNextPage:null!==(t=null===(e=n.pagination)||void 0===e?void 0:e.hasNextPage(g.current,E))&&void 0!==t&&t,getResultCount:function(){var t,e;return null!==(t=null===(e=n.pagination)||void 0===e?void 0:e.getResultCount(g.current))&&void 0!==t?t:null},refetch:(i=(0,r.Z)(u().mark(function n(){return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N();case 2:return n.abrupt("return",null);case 3:case"end":return n.stop()}},n)})),function(){return i.apply(this,arguments)}),fetchNextPage:(o=(0,r.Z)(u().mark(function n(){var t;return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return D(t=E+1),n.abrupt("return",t);case 3:case"end":return n.stop()}},n)})),function(){return o.apply(this,arguments)})}},[M,h,x,S,y,n.pagination,N,E,D])}},75976:function(n,t,e){e.d(t,{Qd:function(){return i},vt:function(){return o}});var r=e(6939);function i(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=n.keyFn(t,e);return[n.tag,"GET",i,null,r]}function o(n,t){var e=n.keyFn(t);return[n.tag].concat((0,r.Z)(e),[-1])}}}]);